"use strict";!function(){function e(){u=document.querySelectorAll("[data-modal]");for(var e=0;e<u.length;e++)u[e].addEventListener("click",function(e){t.call(this,e)})}function t(e){s=a(),s.classList.add("modal-window_visible"),document.body.classList.add("modal-enabled"),m=s.querySelector("[data-type=modal-loader]"),m.classList.add("modal-window__load-indicator_visible"),setTimeout(function(){s.classList.add("modal-window__overlay")},1),r=s.querySelector("[data-type=modal-container]");var t=this.getAttribute("href"),d=this.getAttribute("data-modal");switch(c=s.querySelector("[data-type=modal-hider]"),d){case"inline":var l=void 0,u=document.querySelector(t);u?l=u.innerHTML:(l="Error",console.log("Can't find inline-block")),o(l);break;case"image":var v=document.createElement("div");v.style.display="none";var w=document.createElement("img");w.setAttribute("src",t),w.classList.add("modal-window__image"),console.log(w),document.body.appendChild(v),v.appendChild(w),w.onload=function(){o(w.outerHTML),document.body.removeChild(v)};break;case"ajax":var y=new XMLHttpRequest;y.open("GET",t,!0),y.send(),y.onreadystatechange=function(){if(4===y.readyState)if(200!==y.status)console.error("[Modal] Content loading error"+y.status+": "+y.statusText);else{var e=document.getElementById("forXHR");e.innerHTML=y.responseText,o(y.responseText)}};break;default:var p=document.createElement("div");p.innerHTML="Error",p.className="modal-window__error",content=p,console.log("Wrong content type in data-modal-type")}addEventListener("keydown",function(e){return n(e)}),s.addEventListener("click",function(e){return i(e)}),e.preventDefault()}function a(){var e=void 0;if(document.querySelector("[data-type=modal-window]"))e=document.querySelector("[data-type=modal-window]");else{var t=document.createElement("div");t.classList.add("modal-window"),t.setAttribute("data-type","modal-window");var a=document.createElement("div");a.setAttribute("data-type","modal-hider"),a.style.display="none";var o=document.createElement("div");o.classList.add("modal-window__load-indicator"),o.setAttribute("data-type","modal-loader");var d=document.createElement("div");d.classList.add("modal-window__container"),d.setAttribute("data-type","modal-container");var n=document.createElement("div");n.classList.add("modal-window__close"),n.setAttribute("data-type","modal-close-button"),n.innerHTML="&#10761;";var i=document.createElement("div");i.classList.add("modal-window__content"),i.setAttribute("data-type","modal-content"),d.appendChild(n),d.appendChild(i),d.appendChild(i),t.appendChild(o),t.appendChild(d),t.appendChild(a),document.body.appendChild(t),e=t}return e}function o(e){r=s.querySelector("[data-type=modal-container]"),l=r.querySelector("[data-type=modal-content]"),l.innerHTML=e,m.classList.remove("modal-window__load-indicator_visible"),r.classList.add("modal-window__container_visible"),l.offsetHeight+25>window.innerHeight&&s.classList.add("modal-window_scroll"),setTimeout(function(){r.classList.add("modal-window__container_scale")},1),r.querySelector("[data-type=modal-close-button]").addEventListener("click",d)}function d(){r.classList.remove("modal-window__container_scale"),s.classList.remove("modal-window__overlay"),c.innerHTML="",setTimeout(function(){s.classList.remove("modal-window_visible"),s.classList.remove("modal-window_scroll"),r.classList.remove("modal-window__container_visible")},100),document.body.classList.remove("modal-enabled")}function n(e){"27"==e.keyCode&&d()}function i(e){for(var t=e.target,a=!0;t!==s;){if(t===r)return void(a=!1);t=t.parentNode}a&&d()}var l=void 0,r=void 0,s=void 0,c=void 0,m=void 0,u=void 0;e();for(var v=document.querySelectorAll("[data-content]"),w=0,y=new MutationObserver(function(t){t.forEach(function(e){"childList"===e.type&&w++}),w>0&&(e(),w=0)}),p={attributes:!0,childList:!0,characterData:!0,subtree:!0},_=0;_<v.length;_++)y.observe(v[_],p)}();